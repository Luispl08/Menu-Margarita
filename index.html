<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Margarita Restaurant & Lounge</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM & Babel -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide Icons (Versión UMD para navegador) -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        /* Personalizaciones adicionales para scrollbars oscuros */
        body {
            background-color: #09090b; /* zinc-950 */
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #18181b; 
        }
        ::-webkit-scrollbar-thumb {
            background: #4b5563; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #f59e0b; 
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Mapeo de iconos Lucide desde la variable global 'lucide'
        // Creamos componentes wrapper para usarlos como en React normal
        const LucideIcon = ({ name, className, ...props }) => {
            const iconName = name.charAt(0).toLowerCase() + name.slice(1);
            
            // Efecto para renderizar el icono después de montar
            useEffect(() => {
                lucide.createIcons();
            }, []);

            // Renderizamos un i con los atributos para que lucide lo reemplace
            // O mejor aún, usamos los SVGs directamente si pudiéramos, pero lucide.icons tiene la data
            // Para simplificar en este entorno CDN sin build step, usaremos una aproximación SVG directa
            // Extrayendo la data de lucide.icons (que está disponible globalmente)
            
            const iconData = lucide.icons[name];
            if (!iconData) return null;

            // Convertimos la data de lucide a SVG React
            return (
                <svg 
                    xmlns="http://www.w3.org/2000/svg" 
                    width="24" 
                    height="24" 
                    viewBox="0 0 24 24" 
                    fill="none" 
                    stroke="currentColor" 
                    strokeWidth="2" 
                    strokeLinecap="round" 
                    strokeLinejoin="round" 
                    className={className}
                    {...props}
                >
                    {iconData.map((child, index) => {
                        const [tag, attrs] = child;
                        return React.createElement(tag, { ...attrs, key: index });
                    })}
                </svg>
            );
        };

        // Definimos los iconos que usamos para que el código principal no cambie mucho
        const Utensils = (props) => <LucideIcon name="Utensils" {...props} />;
        const Pizza = (props) => <LucideIcon name="Pizza" {...props} />;
        const Beer = (props) => <LucideIcon name="Beer" {...props} />;
        const Wine = (props) => <LucideIcon name="Wine" {...props} />;
        const Coffee = (props) => <LucideIcon name="Coffee" {...props} />;
        const Phone = (props) => <LucideIcon name="Phone" {...props} />;
        const Instagram = (props) => <LucideIcon name="Instagram" {...props} />;
        const ChevronDown = (props) => <LucideIcon name="ChevronDown" {...props} />;
        const ChevronUp = (props) => <LucideIcon name="ChevronUp" {...props} />;
        const Salad = (props) => <LucideIcon name="Salad" {...props} />;
        const Drumstick = (props) => <LucideIcon name="Drumstick" {...props} />;
        const GlassWater = (props) => <LucideIcon name="GlassWater" {...props} />;
        const Cigarette = (props) => <LucideIcon name="Cigarette" {...props} />;
        const Settings = (props) => <LucideIcon name="Settings" {...props} />;
        const Plus = (props) => <LucideIcon name="Plus" {...props} />;
        const Trash2 = (props) => <LucideIcon name="Trash2" {...props} />;
        const Save = (props) => <LucideIcon name="Save" {...props} />;
        const Lock = (props) => <LucideIcon name="Lock" {...props} />;
        const X = (props) => <LucideIcon name="X" {...props} />;
        const RotateCcw = (props) => <LucideIcon name="RotateCcw" {...props} />;
        const IceCream = (props) => <LucideIcon name="IceCream" {...props} />;
        const Beef = (props) => <LucideIcon name="Beef" {...props} />;
        const Soup = (props) => <LucideIcon name="Soup" {...props} />;
        const Eye = (props) => <LucideIcon name="Eye" {...props} />;
        const EyeOff = (props) => <LucideIcon name="EyeOff" {...props} />;

        // --- ICONOS PERSONALIZADOS (Tus diseños SVG) ---

        const MargaritaIcon = ({ className }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
            <g stroke="white">
            <path d="M12 2v4" strokeWidth="3" />
            <path d="M12 18v4" strokeWidth="3" />
            <path d="M2 12h4" strokeWidth="3" />
            <path d="M18 12h4" strokeWidth="3" />
            <path d="M4.9 4.9l2.8 2.8" strokeWidth="3" />
            <path d="M16.3 16.3l2.8 2.8" strokeWidth="3" />
            <path d="M4.9 19.1l2.8-2.8" strokeWidth="3" />
            <path d="M16.3 7.7l2.8-2.8" strokeWidth="3" />
            </g>
            <circle cx="12" cy="12" r="3" fill="currentColor" stroke="none" />
        </svg>
        );

        const CalzoneIcon = ({ className }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
            <path d="M3 14c0-5 4-9 9-9s9 4 9 9" />
            <path d="M3 14h18" />
            <path d="M3 14c0 2.5 2 4 5 4h8c3 0 5-1.5 5-4" />
            <path d="M8 14v-2" />
            <path d="M16 14v-2" />
            <path d="M12 14v-3" />
        </svg>
        );

        const PastaIcon = ({ className }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
            <path d="M4 16h16c0 2.5-3.5 4-8 4s-8-1.5-8-4" />
            <path d="M6 16c0-3.5 2-6 6-6s6 2.5 6 6" />
            <path d="M12 4v8" />
            <path d="M9 7l3 3 3-3" />
        </svg>
        );

        const BreadIcon = ({ className }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
            <circle cx="8" cy="14" r="5" />
            <circle cx="16" cy="14" r="5" />
            <path d="M8 12a2 2 0 0 1 0 4" />
            <path d="M16 12a2 2 0 0 1 0 4" />
        </svg>
        );

        const BurgerIcon = ({ className }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
            <path d="M6 13h12v2H6z" fill="currentColor" fillOpacity="0.2" stroke="none" /> 
            <path d="M4 10c0-3 2.5-5 8-5s8 2 8 5H4z" /> 
            <path d="M4 15h16" /> 
            <path d="M5 15v3a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3" /> 
            <line x1="6" y1="13" x2="18" y2="13" /> 
        </svg>
        );

        const PepitoIcon = ({ className }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
            <rect x="2" y="8" width="20" height="8" rx="4" /> 
            <line x1="2" y1="12" x2="22" y2="12" /> 
            <path d="M6 8l2-2" /> 
            <path d="M10 8l2-2" />
            <path d="M14 8l2-2" />
            <path d="M18 8l2-2" />
        </svg>
        );

        const HotDogIcon = ({ className }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
            <path d="M4 14a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2z" /> 
            <path d="M2 12h20" strokeWidth="2" strokeLinecap="round" className="text-amber-600" /> 
            <path d="M7 12c1-1 2-1 3 0s2 1 3 0 2-1 3 0" strokeWidth="1.5" /> 
        </svg>
        );

        const SushiIcon = ({ className }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
            <circle cx="7" cy="15" r="4" />
            <circle cx="17" cy="15" r="4" />
            <circle cx="12" cy="9" r="4" />
            <circle cx="7" cy="15" r="1.5" fill="currentColor" />
            <circle cx="17" cy="15" r="1.5" fill="currentColor" />
            <circle cx="12" cy="9" r="1.5" fill="currentColor" />
        </svg>
        );

        const TacoIcon = ({ className }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
            <path d="M2 16c0-5.5 4.5-10 10-10s10 4.5 10 10" />
            <path d="M3 16h18" />
            <path d="M7 16c0-2 1.5-4 5-4s5 2 5 4" strokeDasharray="2 2" />
        </svg>
        );

        const FishIcon = ({ className }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
            <path d="M2 12s4-5 9-5 9 5 9 5-4 5-9 5-9-5-9-5" />
            <circle cx="16" cy="12" r="2" />
            <path d="M21 12l2-2" />
            <path d="M21 12l2 2" />
        </svg>
        );

        const DessertIcon = ({ className }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
            <path d="M12 21a9 9 0 0 0 9-9c0-4.97-4.03-9-9-9s-9 4.03-9 9a9 9 0 0 0 9 9z" />
            <path d="M12 3v9h9" /> 
            <circle cx="12" cy="12" r="2" fill="currentColor" stroke="none" opacity="0.5"/>
        </svg>
        );

        // --- TIPOS DE CATEGORÍA DISPONIBLES ---
        const CATEGORY_TYPES = [
        { id: 'salad', label: 'Ensalada', icon: <Salad className="w-5 h-5" /> },
        { id: 'chicken', label: 'Pollo', icon: <Drumstick className="w-5 h-5" /> },
        { id: 'burger', label: 'Hamburguesa', icon: <BurgerIcon className="w-5 h-5" /> },
        { id: 'pepito', label: 'Pepito', icon: <PepitoIcon className="w-5 h-5" /> },
        { id: 'hotdog', label: 'Perro Caliente', icon: <HotDogIcon className="w-5 h-5" /> },
        { id: 'sushi', label: 'Sushi', icon: <SushiIcon className="w-5 h-5" /> },
        { id: 'pizza', label: 'Pizza', icon: <Pizza className="w-5 h-5" /> },
        { id: 'pasta', label: 'Pasta', icon: <PastaIcon className="w-5 h-5" /> },
        { id: 'calzone', label: 'Calzone', icon: <CalzoneIcon className="w-5 h-5" /> },
        { id: 'taco', label: 'Taco', icon: <TacoIcon className="w-5 h-5" /> },
        { id: 'steak', label: 'Carne', icon: <Beef className="w-5 h-5" /> },
        { id: 'fish', label: 'Pescado', icon: <FishIcon className="w-5 h-5" /> },
        { id: 'soup', label: 'Sopa', icon: <Soup className="w-5 h-5" /> },
        { id: 'bread', label: 'Pan/Extras', icon: <BreadIcon className="w-5 h-5" /> },
        { id: 'dessert', label: 'Postre', icon: <DessertIcon className="w-5 h-5" /> },
        { id: 'coffee', label: 'Café/Bebida', icon: <Coffee className="w-5 h-5" /> },
        { id: 'beer', label: 'Cerveza', icon: <Beer className="w-5 h-5" /> },
        { id: 'glass', label: 'Trago', icon: <GlassWater className="w-5 h-5" /> },
        { id: 'wine', label: 'Botella', icon: <Wine className="w-5 h-5" /> },
        { id: 'cigarette', label: 'Arguile', icon: <Cigarette className="w-5 h-5" /> },
        ];

        // --- DATOS INICIALES ---
        const INITIAL_MENU_DATA = [
        {
            category: "Ensaladas",
            type: "salad",
            visible: true, 
            items: [
            { name: "Cesar con Pollo", description: "Lechuga Romana, croutons dorados, parmesano, aderezo cesar, pollo a la plancha.", price: 8 },
            { name: "Capresse", description: "Tomate en rodajas, queso mozzarella y albahaca con aceite de oliva.", price: 8 }
            ]
        },
        {
            category: "Hamburguesas",
            type: "burger",
            visible: false, // Oculto por defecto
            items: [
            { name: "Margarita Burger", description: "Carne angus, queso cheddar, cebolla caramelizada, tocineta y salsa de la casa.", price: 10 },
            { name: "Clásica", description: "Carne, queso, lechuga, tomate y salsas.", price: 8 },
            { name: "Pollo Crispy", description: "Pechuga empanizada, ensalada coleslaw y mostaza dulce.", price: 9 }
            ]
        },
        {
            category: "Pepitos",
            type: "pepito",
            visible: false, // Oculto por defecto
            items: [
            { name: "Pepito Mixto", description: "Pan baguette, lomito, pollo, chuleta, queso pecorino, papas y salsas.", price: 12 },
            { name: "Pepito de Lomito", description: "Pan baguette, tiras de lomito, queso gratinado y maíz.", price: 11 },
            { name: "Pepito Tradicional", description: "Carne de primera, queso de mano, jamón y vegetales.", price: 10 }
            ]
        },
        {
            category: "Perros Calientes",
            type: "hotdog",
            visible: false, // Oculto por defecto
            items: [
            { name: "Perro Especial", description: "Salchicha polaca, carne molida, queso amarillo, cebolla y papitas.", price: 5 },
            { name: "Perro Sencillo", description: "Salchicha tradicional, repollo, cebolla y salsas.", price: 3 }
            ]
        },
        {
            category: "Pollo",
            type: "chicken",
            visible: true,
            items: [
            { name: "Nuggets de Pollo", description: "Cuadraditos de pollo crujiente, acompañado con papas fritas y salsa de la casa.", price: 7 },
            { name: "Pollo a la Margarita", description: "Pollo a la plancha gratinado, con aderezo de la casa, papas fritas y ensalada.", price: 8 },
            { name: "Pollo a la Canasta", description: "Pollo empanizado frito, acompañado con papas fritas y ensalada.", price: 8 },
            { name: "Tender de Pollo", description: "Tiritas de pollo crujiente, acompañado con papas fritas y salsa de la casa.", price: 8 }
            ]
        },
        {
            category: "Calzones",
            type: "calzone",
            visible: true,
            items: [
            { name: "Calzones", description: "Salsa de la casa, queso mozzarella y dos ingredientes a elección.", price: 6.5 }
            ]
        },
        {
            category: "Pizzas",
            type: "pizza",
            visible: true,
            items: [
            { name: "Margarita", description: "Salsa de la casa y queso mozzarella.", price: 7 },
            { name: "Jamón", description: "Salsa de la casa, queso mozzarella y jamón.", price: 8 },
            { name: "Pepperoni", description: "Salsa de la casa, queso mozzarella y pepperoni.", price: 9 },
            { name: "Hawaiana", description: "Salsa de la casa, queso mozzarella, jamón y piña.", price: 9 },
            { name: "Primavera", description: "Salsa de la casa, queso mozzarella, tocineta, jamón y maíz.", price: 10 },
            { name: "Vegetariana", description: "Salsa de la casa, queso mozzarella, aceitunas, pimentón, cebolla y maíz.", price: 10 },
            { name: "Capresse", description: "Salsa de la casa, queso mozzarella, tomate, parmesano y pesto.", price: 10 },
            { name: "Rúcula", description: "Salsa de la casa, queso Mozzarella, aceitunas, champiñones, rúcula y parmesano.", price: 10 },
            { name: "Prosciutto", description: "Salsa de la casa, queso mozzarella, jamón serrano, rúcula y parmesano.", price: 12 },
            { name: "Caprichosa", description: "Salsa de la casa, mozzarella, champiñones, salchichón, jamón y anchoas.", price: 12 },
            { name: "Margarita Sublime", description: "Salsa, mozzarella, tocineta, pepperoni, jamón ahumado, maíz y crema de leche.", price: 12 }
            ]
        },
        {
            category: "Sushi",
            type: "sushi",
            visible: false, // Oculto por defecto
            items: [
            { name: "California Roll", description: "Cangrejo, pepino, aguacate y sésamo.", price: 10 },
            { name: "Tempura Roll", description: "Langostino tempura, queso crema y salsa anguila.", price: 12 },
            { name: "Margarita Roll", description: "Salmón fresco, queso crema, tope de aguacate y topping de dinamita.", price: 14 }
            ]
        },
        {
            category: "Pastas",
            type: "pasta",
            visible: true,
            items: [
            { name: "Pasta Boloñesa", description: "Salsa de la casa, tomate, carne de res & cerdo y parmesano.", price: 8 },
            { name: "Pasta Napolitana", description: "Salsa de la casa, tomate y parmesano.", price: 8 },
            { name: "Pasta Carbonara", description: "Salsa de la casa, cebolla, guanciale y parmesano.", price: 8 },
            { name: "Pasta con Pesto", description: "Salsa de la casa, pesto y parmesano.", price: 8 },
            { name: "Pasticho", description: "Clásico pasticho de la casa.", price: 8 }
            ]
        },
        {
            category: "Tacos Mexicanos",
            type: "taco",
            visible: false, // Oculto por defecto
            items: [
            { name: "Tacos al Pastor", description: "Cerdo marinado, piña y cilantro.", price: 8 },
            { name: "Tacos de Carne", description: "Carne asada, pico de gallo y guacamole.", price: 9 }
            ]
        },
        {
            category: "Parrilla",
            type: "steak",
            visible: false, // Oculto por defecto
            items: [
            { name: "Parrilla Mixta", description: "Carne, pollo, chorizo, morcilla y yuca.", price: 15 },
            { name: "Solomo", description: "Corte de solomo con guarnición.", price: 14 }
            ]
        },
        {
            category: "Pescados",
            type: "fish",
            visible: false, // Oculto por defecto
            items: [
            { name: "Rueda de Pescado", description: "Pescado frito con tostones y ensalada.", price: 12 },
            { name: "Ceviche", description: "Pescado blanco marinado en limón.", price: 10 }
            ]
        },
        {
            category: "Sopas",
            type: "soup",
            visible: false, // Oculto por defecto
            items: [
            { name: "Sopa del Día", description: "Consultar disponibilidad.", price: 6 },
            { name: "Crema de Auyama", description: "Con trocitos de queso.", price: 5 }
            ]
        },
        {
            category: "Postres",
            type: "dessert",
            visible: false, // Oculto por defecto
            items: [
            { name: "Brownie con Helado", description: "Brownie caliente con bola de helado de vainilla.", price: 6 },
            { name: "Quesillo", description: "Tradicional quesillo casero.", price: 4 }
            ]
        },
        {
            category: "Acompañamientos",
            type: "bread",
            visible: true,
            items: [
            { name: "Pan a Ajillo", description: "", price: 3 },
            { name: "Papas Fritas", description: "", price: 5 },
            { name: "Tequeños", description: "", price: 6 }
            ]
        },
        {
            category: "Bebidas",
            type: "coffee",
            visible: true,
            items: [
            { name: "Refresco Botella 350ml", description: "", price: 1 },
            { name: "Malta Botella", description: "", price: 1 },
            { name: "Agua Mineral 355ml", description: "", price: 1.5 },
            { name: "Refresco Lata", description: "", price: 2 },
            { name: "Malta Lata", description: "", price: 2 },
            { name: "Jugo Yukery", description: "", price: 2 },
            { name: "Agua Mineral 600ml", description: "", price: 2 },
            { name: "Nescafé", description: "", price: 2 },
            { name: "Refresco Litro", description: "", price: 2.5 },
            { name: "Agua Sparkling", description: "", price: 2.5 },
            { name: "Té Lipton", description: "", price: 3 },
            { name: "Gatorade", description: "", price: 3 },
            { name: "Refresco 1.5L", description: "", price: 3.5 },
            { name: "Malta 1.5L", description: "", price: 3.5 }
            ]
        },
        {
            category: "Cervezas",
            type: "beer",
            visible: true,
            items: [
            { name: "Polar Negrita/Light/Azul", description: "Botella individual", price: 1.1 },
            { name: "Solera Verde", description: "Botella individual", price: 1.4 },
            { name: "Polar/Solera Lata 250ml", description: "Negra, Light o Azul", price: 1.5 },
            { name: "Solera Verde Lata 250ml", description: "", price: 1.7 },
            { name: "Polar Lata Tercio 355ml", description: "Negra o Light", price: 2 },
            { name: "Tobo 10 Unidades", description: "Negrita, Light o Azul", price: 10 }
            ]
        },
        {
            category: "Tragos",
            type: "glass",
            visible: true,
            items: [
            { name: "Sangría", description: "Copa", price: 2.5 },
            { name: "Ron", description: "Servicio individual", price: 4 },
            { name: "Tequila", description: "Shot/Servicio", price: 5 },
            { name: "Margarita", description: "Coctel de la casa", price: 5 },
            { name: "Whisky", description: "Servicio individual", price: 6 }
            ]
        },
        {
            category: "Servicios (Botellas)",
            type: "wine",
            visible: true,
            items: [
            { name: "Jarra Sangría", description: "", price: 10 },
            { name: "Vino Tinto", description: "", price: 16 },
            { name: "Santa Teresa", description: "Botella", price: 24 },
            { name: "Silver Parr 8 años", description: "Botella", price: 35 },
            { name: "Old Parr 12 años", description: "Botella", price: 45 },
            { name: "Buchanan's 12 años", description: "Botella", price: 47 }
            ]
        },
        {
            category: "Arguile",
            type: "cigarette",
            visible: true,
            items: [
            { name: "Servicio de Arguile", description: "Consultar sabores disponibles", price: 8 }
            ]
        }
        ];

        // Helper to get icon by string type
        const getIconByType = (type) => {
        const props = { className: "w-6 h-6" };
        switch(type) {
            case 'salad': return <Salad {...props} />;
            case 'chicken': return <Drumstick {...props} />;
            case 'calzone': return <CalzoneIcon {...props} />;
            case 'pizza': return <Pizza {...props} />;
            case 'pasta': return <PastaIcon {...props} />;
            case 'bread': return <BreadIcon {...props} />;
            case 'coffee': return <Coffee {...props} />;
            case 'beer': return <Beer {...props} />;
            case 'glass': return <GlassWater {...props} />;
            case 'wine': return <Wine {...props} />;
            case 'cigarette': return <Cigarette {...props} />;
            
            // Nuevos tipos
            case 'burger': return <BurgerIcon {...props} />;
            case 'pepito': return <PepitoIcon {...props} />;
            case 'hotdog': return <HotDogIcon {...props} />;
            case 'sushi': return <SushiIcon {...props} />;
            case 'taco': return <TacoIcon {...props} />;
            case 'steak': return <Beef {...props} />; 
            case 'fish': return <FishIcon {...props} />;
            case 'soup': return <Soup {...props} />; 
            case 'dessert': return <DessertIcon {...props} />;

            default: return <Utensils {...props} />;
        }
        };

        function App() {
        const [openCategory, setOpenCategory] = useState(null);
        const [menuData, setMenuData] = useState(INITIAL_MENU_DATA);
        const [originalData, setOriginalData] = useState(null); 
        const [isAdmin, setIsAdmin] = useState(false);
        
        // Login States
        const [showLogin, setShowLogin] = useState(false);
        const [passwordInput, setPasswordInput] = useState("");
        const [loginError, setLoginError] = useState(false);

        // Add Category Modal States
        const [showAddCatModal, setShowAddCatModal] = useState(false);
        const [newCatName, setNewCatName] = useState("");
        const [newCatType, setNewCatType] = useState("burger");

        // Cargar datos
        useEffect(() => {
            const savedData = localStorage.getItem('margaritaMenuData');
            if (savedData) {
            try {
                setMenuData(JSON.parse(savedData));
            } catch (e) {
                console.error("Error cargando datos", e);
            }
            }
        }, []);

        // Guardar datos
        useEffect(() => {
            localStorage.setItem('margaritaMenuData', JSON.stringify(menuData));
        }, [menuData]);

        const toggleCategory = (categoryName) => {
            setOpenCategory(openCategory === categoryName ? null : categoryName);
        };

        const handleLogin = (e) => {
            e.preventDefault();
            if (passwordInput === "MaximilianoLopezP") {
            setOriginalData(JSON.parse(JSON.stringify(menuData))); 
            setIsAdmin(true);
            setShowLogin(false);
            setPasswordInput("");
            setLoginError(false);
            } else {
            setLoginError(true);
            }
        };

        const handleCancel = () => {
            if (originalData) {
            setMenuData(originalData); 
            }
            setIsAdmin(false);
            setOriginalData(null);
        };

        // --- CRUD OPERATIONS ---

        const updateItem = (catIndex, itemIndex, field, value) => {
            const newData = [...menuData];
            const newCategory = { ...newData[catIndex] };
            const newItems = [...newCategory.items];
            const newItem = { ...newItems[itemIndex] };

            if (field === 'price') {
            newItem[field] = value === '' ? 0 : parseFloat(value);
            } else {
            newItem[field] = value;
            }

            newItems[itemIndex] = newItem;
            newCategory.items = newItems;
            newData[catIndex] = newCategory;
            
            setMenuData(newData);
        };

        const addItem = (catIndex) => {
            const newData = [...menuData];
            const newCategory = { ...newData[catIndex] };
            newCategory.items = [...newCategory.items, {
            name: "Nuevo Plato",
            description: "Descripción del plato",
            price: 0
            }];
            newData[catIndex] = newCategory;
            setMenuData(newData);
        };

        const deleteItem = (catIndex, itemIndex) => {
            if (window.confirm("¿Eliminar este plato?")) {
            const newData = [...menuData];
            const newCategory = { ...newData[catIndex] };
            newCategory.items = [...newCategory.items];
            newCategory.items.splice(itemIndex, 1);
            newData[catIndex] = newCategory;
            setMenuData(newData);
            }
        };

        const deleteCategory = (catIndex) => {
            if (window.confirm(`¿Seguro que quieres eliminar toda la categoría "${menuData[catIndex].category}" y sus productos?`)) {
            const newData = [...menuData];
            newData.splice(catIndex, 1);
            setMenuData(newData);
            }
        };

        const toggleCategoryVisibility = (catIndex, e) => {
            e.stopPropagation(); // Prevenir que se abra/cierre el acordeón
            const newData = [...menuData];
            newData[catIndex].visible = !newData[catIndex].visible;
            setMenuData(newData);
        };

        const handleAddCategory = () => {
            if (!newCatName.trim()) return;
            
            const newCategory = {
            category: newCatName,
            type: newCatType,
            visible: true, // Visible por defecto si se crea manualmente
            items: [
                { name: "Producto de ejemplo", description: "Descripción...", price: 0 }
            ]
            };
            
            setMenuData([...menuData, newCategory]);
            setShowAddCatModal(false);
            setNewCatName("");
            setNewCatType("burger");
            
            setTimeout(() => {
            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
            }, 100);
        };

        return (
            <div className="min-h-screen bg-zinc-950 text-zinc-100 font-sans selection:bg-amber-500 selection:text-black">
            
            {/* Admin Toolbar */}
            {isAdmin && (
                <div className="sticky top-0 z-50 bg-amber-600 text-white p-3 shadow-lg flex justify-between items-center px-4 border-b border-amber-400">
                <span className="font-bold text-sm uppercase tracking-wider flex items-center gap-2">
                    <Settings className="w-5 h-5" /> Modo Editor
                </span>
                <div className="flex gap-2">
                    <button 
                    onClick={handleCancel}
                    className="text-xs bg-red-600/80 hover:bg-red-700 text-white px-3 py-1.5 rounded flex items-center gap-1 transition-colors border border-red-800"
                    >
                    <RotateCcw className="w-3 h-3" /> Cancelar
                    </button>
                    <button 
                    onClick={() => setIsAdmin(false)} 
                    className="text-xs bg-green-600/80 hover:bg-green-700 text-white px-3 py-1.5 rounded flex items-center gap-1 transition-colors border border-green-800 font-bold"
                    >
                    <Save className="w-3 h-3" /> Guardar y Salir
                    </button>
                </div>
                </div>
            )}

            {/* Header */}
            <header className="relative w-full py-12 px-6 bg-gradient-to-b from-zinc-900 to-zinc-950 border-b border-amber-500/20">
                <div className="max-w-3xl mx-auto text-center flex flex-col items-center">
                <div className="inline-block p-4 rounded-full bg-zinc-900 border border-amber-500/30 shadow-[0_0_20px_rgba(245,158,11,0.3)]">
                    <MargaritaIcon className="w-16 h-16 text-amber-500" />
                </div>
                <h1 className="text-4xl md:text-6xl font-serif font-bold text-transparent bg-clip-text bg-gradient-to-r from-amber-400 via-orange-500 to-amber-400 tracking-tight mt-2">
                    MARGARITA
                </h1>
                <p className="text-amber-500/80 tracking-[0.2em] text-sm md:text-base uppercase font-medium mt-3">
                    Restaurant & Lounge
                </p>
                </div>
            </header>

            {/* Main Menu */}
            <main className="max-w-3xl mx-auto px-4 py-8 pb-24">
                <div className="space-y-4">
                {menuData.map((section, sectionIndex) => {
                    
                    // FILTRADO: Si no es admin y la categoría no es visible, la saltamos.
                    if (!isAdmin && section.visible === false) return null;

                    const isOpen = openCategory === section.category;
                    
                    let itemsToRender = section.items;
                    if (!isAdmin) {
                    itemsToRender = [...section.items].sort((a, b) => a.price - b.price);
                    }

                    // Estilos para categorías ocultas en modo admin
                    const containerClass = section.visible 
                    ? (isOpen ? 'border-amber-500/50 bg-zinc-900/50' : 'border-zinc-800 bg-zinc-900')
                    : 'border-zinc-700 border-dashed bg-zinc-900/20 opacity-75'; // Estilo "fantasma"

                    return (
                    <div 
                        key={sectionIndex} 
                        className={`overflow-hidden rounded-xl transition-all duration-300 border ${containerClass}`}
                    >
                        {/* Header Categoría */}
                        <div className="flex w-full relative">
                        <button
                            onClick={() => toggleCategory(section.category)}
                            className="flex-grow flex items-center justify-between p-5 text-left focus:outline-none group"
                        >
                            <div className="flex items-center gap-4">
                            <span className={`p-2 rounded-lg transition-colors ${
                                isOpen ? 'bg-amber-500 text-black' : 'bg-zinc-800 text-amber-500 group-hover:bg-zinc-700'
                            }`}>
                                {getIconByType(section.type)}
                            </span>
                            <span className="text-xl font-medium tracking-wide text-zinc-100 flex items-center gap-2">
                                {section.category}
                                {isAdmin && !section.visible && (
                                <span className="text-xs px-2 py-0.5 rounded bg-zinc-700 text-zinc-400 uppercase font-bold tracking-wider">
                                    Oculto
                                </span>
                                )}
                            </span>
                            </div>
                            
                            {isOpen ? (
                            <ChevronUp className="w-5 h-5 text-amber-500" />
                            ) : (
                            <ChevronDown className="w-5 h-5 text-zinc-500 group-hover:text-amber-500" />
                            )}
                        </button>

                        {/* ADMIN CONTROLS: Toggle Visibilidad y Eliminar */}
                        {isAdmin && (
                            <div className="absolute right-14 top-5 flex gap-2 z-10">
                            <button 
                                onClick={(e) => toggleCategoryVisibility(sectionIndex, e)}
                                className={`p-1 rounded hover:bg-zinc-700 ${section.visible ? 'text-green-500' : 'text-zinc-500'}`}
                                title={section.visible ? "Visible al público (Click para ocultar)" : "Oculto al público (Click para mostrar)"}
                            >
                                {section.visible ? <Eye className="w-5 h-5" /> : <EyeOff className="w-5 h-5" />}
                            </button>
                            <button 
                                onClick={(e) => { e.stopPropagation(); deleteCategory(sectionIndex); }}
                                className="p-1 text-red-500 hover:bg-red-500/10 rounded"
                                title="Eliminar Categoría Completamente"
                            >
                                <Trash2 className="w-5 h-5" />
                            </button>
                            </div>
                        )}
                        </div>

                        {/* Contenido Categoría */}
                        <div 
                        className={`transition-[max-height,opacity] duration-300 ease-in-out ${
                            isOpen ? 'max-h-[3000px] opacity-100' : 'max-h-0 opacity-0'
                        }`}
                        >
                        <div className="px-5 pb-5 pt-2 space-y-4">
                            <div className="h-px w-full bg-gradient-to-r from-transparent via-zinc-700 to-transparent mb-4"></div>
                            
                            {itemsToRender.map((item, index) => {
                            return (
                                <div key={index} className={`flex justify-between items-start group/item ${isAdmin ? 'bg-zinc-800/50 p-3 rounded border border-zinc-700 mb-2' : ''}`}>
                                
                                {isAdmin ? (
                                    // --- VISTA DE EDICIÓN ---
                                    <div className="w-full flex flex-col gap-2">
                                    <div className="flex justify-between gap-2">
                                        <input 
                                        type="text" 
                                        value={item.name}
                                        onChange={(e) => updateItem(sectionIndex, index, 'name', e.target.value)}
                                        className="bg-zinc-900 border border-zinc-700 rounded p-1 text-amber-500 font-bold w-full focus:border-amber-500 outline-none"
                                        placeholder="Nombre del plato"
                                        />
                                        <button 
                                        onClick={() => deleteItem(sectionIndex, index)}
                                        className="text-red-500 hover:bg-red-500/20 p-2 rounded transition-colors"
                                        title="Eliminar plato"
                                        >
                                        <Trash2 className="w-5 h-5" />
                                        </button>
                                    </div>
                                    <textarea 
                                        value={item.description}
                                        onChange={(e) => updateItem(sectionIndex, index, 'description', e.target.value)}
                                        className="bg-zinc-900 border border-zinc-700 rounded p-1 text-xs text-zinc-300 w-full focus:border-amber-500 outline-none resize-none"
                                        rows="2"
                                        placeholder="Descripción"
                                    />
                                    <div className="flex items-center gap-2 justify-end">
                                        <span className="text-zinc-500 text-sm">Precio $</span>
                                        <input 
                                        type="number" 
                                        value={item.price}
                                        onChange={(e) => updateItem(sectionIndex, index, 'price', e.target.value)}
                                        className="bg-zinc-900 border border-zinc-700 rounded p-1 text-amber-500 w-24 text-right focus:border-amber-500 outline-none"
                                        />
                                    </div>
                                    </div>
                                ) : (
                                    // --- VISTA NORMAL ---
                                    <>
                                    <div className="pr-4">
                                        <h3 className="text-lg font-medium text-amber-50 group-hover/item:text-amber-400 transition-colors">
                                        {item.name}
                                        </h3>
                                        {item.description && (
                                        <p className="text-sm text-zinc-400 mt-1 font-light leading-relaxed">
                                            {item.description}
                                        </p>
                                        )}
                                    </div>
                                    <div className="flex flex-col items-end min-w-[3rem]">
                                        <span className="text-lg font-bold text-amber-500 tabular-nums">
                                        ${item.price % 1 === 0 ? item.price : item.price.toFixed(1)}
                                        </span>
                                    </div>
                                    </>
                                )}
                                </div>
                            );
                            })}

                            {/* Botón Agregar Item (Solo Admin) */}
                            {isAdmin && (
                            <button 
                                onClick={() => addItem(sectionIndex)}
                                className="w-full py-2 mt-4 border-2 border-dashed border-zinc-700 text-zinc-500 hover:border-amber-500 hover:text-amber-500 rounded-lg flex items-center justify-center gap-2 transition-colors font-medium"
                            >
                                <Plus className="w-4 h-4" /> Agregar Plato a {section.category}
                            </button>
                            )}

                        </div>
                        </div>
                    </div>
                    );
                })}

                {/* Botón AGREGAR NUEVA CATEGORÍA (Solo Admin) */}
                {isAdmin && (
                    <button 
                    onClick={() => setShowAddCatModal(true)}
                    className="w-full py-4 mt-8 border-2 border-dashed border-amber-500/50 bg-amber-500/10 text-amber-500 hover:bg-amber-500/20 rounded-xl flex items-center justify-center gap-3 transition-all font-bold text-lg"
                    >
                    <Plus className="w-6 h-6" /> AGREGAR NUEVA CATEGORÍA
                    </button>
                )}

                </div>
            </main>

            {/* Footer / Contact Info / Admin Trigger */}
            <footer className="bg-zinc-900 border-t border-zinc-800 py-10 mt-12 relative">
                <div className="max-w-3xl mx-auto px-6 text-center space-y-6">
                <div className="flex justify-center items-center gap-8">
                    <a href="#" className="flex flex-col items-center gap-2 text-zinc-400 hover:text-amber-500 transition-colors">
                    <div className="p-3 bg-zinc-800 rounded-full">
                        <Instagram className="w-6 h-6" />
                    </div>
                    <span className="text-sm">@Margaritabqto</span>
                    </a>
                    <a href="tel:04245060221" className="flex flex-col items-center gap-2 text-zinc-400 hover:text-amber-500 transition-colors">
                    <div className="p-3 bg-zinc-800 rounded-full">
                        <Phone className="w-6 h-6" />
                    </div>
                    <span className="text-sm">0424-5060221</span>
                    </a>
                </div>
                
                <div className="h-px w-24 bg-amber-500/30 mx-auto"></div>
                
                <p className="text-xs text-zinc-600">
                    Margarita Restaurant &copy; {new Date().getFullYear()}
                    <br />
                    <span className="text-amber-900/60 mt-1 block">Bebidas alcohólicas solo para mayores de 18 años.</span>
                </p>

                <div className="absolute bottom-4 right-4">
                    <button 
                    onClick={() => setShowLogin(true)}
                    className="text-zinc-800 hover:text-zinc-600 transition-colors p-2"
                    title="Administración"
                    >
                    <Settings className="w-4 h-4" />
                    </button>
                </div>
                </div>
            </footer>

            {/* MODAL LOGIN */}
            {showLogin && !isAdmin && (
                <div className="fixed inset-0 bg-black/80 flex items-center justify-center z-[100] px-4">
                <div className="bg-zinc-900 border border-zinc-700 p-6 rounded-xl w-full max-w-sm shadow-2xl relative">
                    <button onClick={() => setShowLogin(false)} className="absolute top-3 right-3 text-zinc-500 hover:text-white">
                    <X className="w-5 h-5" />
                    </button>
                    <div className="text-center mb-6">
                    <div className="inline-block p-3 bg-zinc-800 rounded-full mb-3 text-amber-500">
                        <Lock className="w-6 h-6" />
                    </div>
                    <h3 className="text-xl font-bold text-white">Administrador</h3>
                    <p className="text-zinc-400 text-sm mt-1">Ingresa la contraseña para editar</p>
                    </div>
                    <form onSubmit={handleLogin} className="space-y-4">
                    <input 
                        type="password" 
                        value={passwordInput}
                        onChange={(e) => setPasswordInput(e.target.value)}
                        className="w-full bg-zinc-950 border border-zinc-700 rounded-lg p-3 text-white focus:border-amber-500 outline-none"
                        placeholder="Contraseña"
                        autoFocus
                    />
                    {loginError && <p className="text-red-500 text-xs text-center">Contraseña incorrecta</p>}
                    <button type="submit" className="w-full bg-amber-600 hover:bg-amber-700 text-white font-bold py-3 rounded-lg transition-colors">Ingresar</button>
                    </form>
                </div>
                </div>
            )}

            {/* MODAL AGREGAR CATEGORÍA */}
            {showAddCatModal && (
                <div className="fixed inset-0 bg-black/80 flex items-center justify-center z-[100] px-4">
                <div className="bg-zinc-900 border border-zinc-700 p-6 rounded-xl w-full max-w-md shadow-2xl relative max-h-[90vh] overflow-y-auto">
                    <button onClick={() => setShowAddCatModal(false)} className="absolute top-3 right-3 text-zinc-500 hover:text-white">
                    <X className="w-5 h-5" />
                    </button>
                    
                    <h3 className="text-xl font-bold text-white mb-4 flex items-center gap-2">
                    <Plus className="w-5 h-5 text-amber-500" /> Nueva Categoría
                    </h3>

                    <div className="space-y-4">
                    <div>
                        <label className="block text-xs text-zinc-400 mb-1">Nombre de la Categoría</label>
                        <input 
                        type="text" 
                        value={newCatName}
                        onChange={(e) => setNewCatName(e.target.value)}
                        className="w-full bg-zinc-950 border border-zinc-700 rounded-lg p-3 text-white focus:border-amber-500 outline-none placeholder:text-zinc-600"
                        placeholder="Ej: Hamburguesas, Tacos..."
                        autoFocus
                        />
                    </div>

                    <div>
                        <label className="block text-xs text-zinc-400 mb-2">Selecciona un Icono</label>
                        <div className="grid grid-cols-4 gap-2">
                        {CATEGORY_TYPES.map((type) => (
                            <button
                            key={type.id}
                            onClick={() => setNewCatType(type.id)}
                            className={`flex flex-col items-center justify-center p-2 rounded-lg border transition-all ${
                                newCatType === type.id 
                                ? 'bg-amber-500 text-black border-amber-500' 
                                : 'bg-zinc-950 text-zinc-500 border-zinc-800 hover:border-zinc-600 hover:text-zinc-300'
                            }`}
                            >
                            {type.icon}
                            <span className="text-[10px] mt-1 truncate w-full text-center">{type.label}</span>
                            </button>
                        ))}
                        </div>
                    </div>

                    <button 
                        onClick={handleAddCategory}
                        disabled={!newCatName.trim()}
                        className="w-full bg-amber-600 hover:bg-amber-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold py-3 rounded-lg transition-colors mt-2"
                    >
                        Crear Categoría
                    </button>
                    </div>
                </div>
                </div>
            )}

            </div>
        );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>